<!--
  Generated template for the NewticketsPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar class="no-right">
    <ion-col class="center">
      
       <i class="back_icon" (click)="back()"></i>
      <p class="title">New Mail</p>
    </ion-col>
  </ion-navbar>
</ion-header>
<ion-content padding>
	<ion-grid class="form-panel" *ngIf="!showSpinner">
		<ion-row>
			<ion-col col-6>
				<div class="form-field-panel">
					<ion-label class="form-field-label">Property</ion-label>
					<ion-select class="form-field-select" [(ngModel)]="property_id">
					  <ion-option value="" selected>Select</ion-option>
				      <ion-option value="{{ property.id }}" *ngFor=" let  property of properties  ">{{ property.address }}</ion-option>
				    </ion-select>
				</div>
			</ion-col>
			<ion-col col-6>
				<div class="form-field-panel" [class.invalid]=" priority == '' ">
					<ion-label class="form-field-label">Priority Status *</ion-label>
					<ion-select class="form-field-select" [(ngModel)]="priority">
					  <ion-option value="" selected>Select</ion-option>
				      <ion-option value="{{ priority.id }}" *ngFor=" let  priority of priorities  ">{{ priority.priority }}</ion-option>
				    </ion-select>
					
				</div>
			</ion-col>
			<ion-col col-12>
				<div class="form-field-panel" [class.invalid]=" subject == '' ">
				<ion-label class="form-field-label">Subject *</ion-label>
                 <ion-input class="form-field-input" [(ngModel)]="subject"></ion-input>
             </div>
			</ion-col>
			<ion-col col-12>
				<div class="form-field-panel" [class.invalid]="  body == ''  ">
				<ion-label class="form-field-label">Body *</ion-label>
				<quill-editor [style]="{ height: '200px' }" [ngModel]="body" [modules]="{
    toolbar: toolbarOptions
  }" [placeholder] = "'Type here'" (onContentChanged)="getEditorContent($event)" (onEditorCreated)="getEditorInstance($event)"></quill-editor>
             </div>
			</ion-col>
			<ion-col col-12>
				<div class="form-field-panel">
				<ion-label class="form-field-label">Attachments</ion-label>
				<div class="upload-btn-wrapper">
				 <button class="u-btn">Choose Files</button>
                 <input type="file" class="form-field-input" multiple="multiple" #fileInput (change)="changeListener($event)">
             	</div>
             	</div>
             	<div class="attachment-panel-preview-group">
             		<div class="uploaded-images">
                    <img *ngFor="let url of urls" [src]="url" class="rounded mb-3" width="180">
                </div>
                </div>
			</ion-col>
		</ion-row>
	
			<ion-row class="btn-row">
    	<ion-col col-6><button ion-button block text-uppercase (click)="back()" type="button" class="btn btn-outline-blue">Cancel</button></ion-col>
    	<ion-col col-6><button ion-button block text-uppercase  class="btn btn-blue" (click) = "storeEmail()" [disabled]="">Send</button></ion-col>
    	</ion-row>
	</ion-grid>
	<div class="spinner center" *ngIf="showSpinner">
        <div class="bounce1"></div>
        <div class="bounce2"></div>
        <div class="bounce3"></div>
    </div>
</ion-content>
